# riscv-tests 调研

## 介绍

该工具集是用使用预设的工具集去进行单元测试，用于检测处理器在执行指令的时候是否符合 RISC-V 规范。

工具会在执行了测试集之后检查寄存器的值是否符合预期，如果涉及内存访问，则会验证内存地址访问的正确性，以及存储的数据是否正确。

所以这个工具集是一个套件面向 RISC-V 处理器，以保证新开发的硬件能够正确的使用 RISC-V 规范去进行指令。

## 测试集介绍

| 测试类型               | 说明                                                                                          |
|------------------------|-----------------------------------------------------------------------------------------------|
| **用户级（User-Level）测试** |                                                                                           |
| `rv32ui`               | 32位用户级，仅测试整数指令。用于验证基本整数运算，如加法、减法、位移等。                           |
| `rv64ui`               | 64位用户级，仅测试整数指令。类似于 `rv32ui`，但针对64位操作。                                     |
| `rv64uf`               | 64位用户级，测试整数和浮点数指令。验证浮点运算的正确性，包括加减、乘除等操作。                       |
| `rv64uv`               | 64位用户级，测试整数、浮点数和向量指令。适用于带有向量扩展的处理器，用于验证向量操作的执行。          |
| **监督级（Supervisor-Level）测试** |                                                                                   |
| `rv32si`               | 32位监督级，仅测试整数指令。关注监督模式下的行为，如权限管理或系统调用。                           |
| `rv64si`               | 64位监督级，仅测试整数指令。                                                                    |
| `rv64sv`               | 64位监督级，测试整数和向量指令。                                                                |

## 仓库结构大体介绍

```
.
├── LICENSE 
├── Makefile.in
├── README.md 
├── benchmarks -> 性能基准测试目录，包含各种测试程序和公共库
│   ├── Makefile -> 构建基准测试的Makefile文件
│   ├── common -> 公共文件和库，用于基准测试运行
│   ├── 各种测试子目录 -> 包含不同的测试程序，例如dhrystone、median、memcpy等，验证性能和功能
├── configure 
├── configure.ac
├── debug -> 用于调试的工具和脚本目录
│   ├── Makefile -> 构建调试工具的Makefile文件
│   ├── README.md -> 调试工具的介绍和使用说明
│   ├── bin -> 包含预编译的二进制文件
│   ├── programs -> 各种测试程序和示例代码，用于调试验证
│   ├── targets -> 针对不同目标环境的配置文件和脚本
│   └── 其他调试工具和配置文件
├── env -> 环境配置文件
├── isa -> 指令集架构测试目录，包含不同的RISC-V指令测试文件
│   ├── rv32* 和 rv64* -> 针对32位和64位不同扩展的测试文件夹，每个文件夹包含汇编文件测试特定指令
│   └── Makefrag -> 各指令集的构建配置文件
└── mt -> 多线程测试目录，包含各种矩阵乘法和向量加法等多线程相关测试程序

```

## 如何使用（未验证）

## 编译

```
## According to https://github.com/riscv-software-src/riscv-tests/tree/master

$ git clone https://github.com/riscv/riscv-tests
$ cd riscv-tests
$ git submodule update --init --recursive
$ autoconf
$ ./configure --prefix=$RISCV/target
$ make
$ make install
```

完成编译后执行编译生成的文件开始测试。